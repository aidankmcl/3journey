import{bn as e,h as t,xn as n,yn as r}from"./three.module-LFc9tN89.js";function i(e,n=1e-4){n=Math.max(n,2**-52);let r={},i=e.getIndex(),a=e.getAttribute(`position`),o=i?i.count:a.count,s=0,c=Object.keys(e.attributes),l={},u={},d=[],f=[`getX`,`getY`,`getZ`,`getW`];for(let t=0,n=c.length;t<n;t++){let n=c[t];l[n]=[];let r=e.morphAttributes[n];r&&(u[n]=Array(r.length).fill(0).map(()=>[]))}let p=10**Math.log10(1/n);for(let t=0;t<o;t++){let n=i?i.getX(t):t,a=``;for(let t=0,r=c.length;t<r;t++){let r=c[t],i=e.getAttribute(r),o=i.itemSize;for(let e=0;e<o;e++)a+=`${~~(i[f[e]](n)*p)},`}if(a in r)d.push(r[a]);else{for(let t=0,r=c.length;t<r;t++){let r=c[t],i=e.getAttribute(r),a=e.morphAttributes[r],o=i.itemSize,s=l[r],d=u[r];for(let e=0;e<o;e++){let t=f[e];if(s.push(i[t](n)),a)for(let e=0,r=a.length;e<r;e++)d[e].push(a[e][t](n))}}r[a]=s,d.push(s),s++}}let m=e.clone();for(let n=0,r=c.length;n<r;n++){let r=c[n],i=e.getAttribute(r),a=new i.array.constructor(l[r]),o=new t(a,i.itemSize,i.normalized);if(m.setAttribute(r,o),r in u)for(let n=0;n<u[r].length;n++){let i=e.morphAttributes[r][n],a=new i.array.constructor(u[r][n]),o=new t(a,i.itemSize,i.normalized);m.morphAttributes[r][n]=o}}return m.setIndex(d),m}function a(e,t){if(t===0)return console.warn(`THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.`),e;if(t===2||t===1){let n=e.getIndex();if(n===null){let t=[],r=e.getAttribute(`position`);if(r!==void 0){for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}else return console.error(`THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.`),e}let r=n.count-2,i=[];if(n)if(t===2)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error(`THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.`);let a=e.clone();return a.setIndex(i),a.clearGroups(),a}else return console.error(`THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:`,t),e}export{a as n,i as t};